# Stierkikker afvangsten datacleaning

Om dit script te laten lopen moet je een *.renviron* bestand aanmaken in de github map van deze repo (standaard vind je deze map in *C:\Users\%username%\Documents\GitHub\sk-analyse)* met daarin de volgende gegevens:

**email = "%je werk email%"**

Dit doen we om dat het bad practice is om email adressen en authenticatie in scripts te zetten. 

Je maakt dit type bestand door eerst in kladblok (of een andere tekstverwerker zoals notepad++) een bestandje aan te maken en vervolgens de extensie te veranderen in *.renviron*

```{r libraries}
library(googlesheets4)
library(tidyverse)
library(tidylog)
```

```{r authenticate}
gs4_auth(email = Sys.getenv("email"))
```

```{r get data}
rawdata <- read_sheet("1_cBgfSjnxakLAQ9uGunDt_-Mk4L0uDx2-qv6cKCzkSk",
                      sheet = "Formulierreacties 1")

vijvers <- read_sheet("1_cBgfSjnxakLAQ9uGunDt_-Mk4L0uDx2-qv6cKCzkSk",
                      sheet = "Andere Vijvers") %>% 
  filter(!is.na(UUID)) %>% 
  mutate(Locatie = tolower(Locatie))
```

```{r combine datasets}
data <- rawdata %>% 
  mutate(Locatie = tolower(`Vijver - Andere`),
         Locatie = case_when(Locatie == "arendonk 2 b" ~ "arendonk 2b",
                             Locatie == "arendonk - visput" ~ "arendonk-visput",
                             Locatie == "sportcomplex heikant( gem. visvijver)" ~ "arendonk-visput",
                             Locatie == "arendonk sportcomplex" ~ "arendonk-visput",
                             TRUE ~ Locatie)) %>% 
  left_join(vijvers)

#check join
not_linked <- data %>% 
  filter(is.na(UUID)) %>% 
  distinct(Locatie)

# Resterende niet gekoppelde acties zijn minder relevant (17/11: 24 acties)
```

```{r datacleaning}
#remove niet gekoppelde acties
data <- data %>% 
  filter(!is.na(UUID))

afvangsten_per_fuik <- rawdata %>% 
  group_by()
  
afvangsten_per_dag <-
```

